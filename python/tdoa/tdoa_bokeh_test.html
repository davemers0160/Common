



<!DOCTYPE html>
<html lang="en">
  
  <head>
    
      <meta charset="utf-8">
      <title>Bokeh Plot</title>
      
      
        
          
        
        
          
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.3.0.min.js" integrity="sha384-HjagQp6T0/7bxYTAXbLotF1MLAGWmhkY5siA1Gc/pcEgvgRPtMsRn0gQtMwGKiw1" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.3.0.min.js" integrity="sha384-ZEPPTjL+mdyqgIq+/pl9KTwzji8Kow2NnI3zWY8+sFinWP/SYJ80BnfeJsa45iYj" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.3.0.min.js" integrity="sha384-exLqv2ACDRIaV7ZK1iL8aGzGYQvKVuT3U2CT7FsQREBxRah6JrkVCoFy0koY1YqV" crossorigin="anonymous"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>
        
      
      
    
  </head>
  
  
  <body>
    
      
        
          
          
            
              <div class="bk-root" id="10ff74c6-53c4-46d0-91b4-eeed854d3882" data-root-id="1088"></div>
            
          
        
      
      
        <script type="application/json" id="1265">
          {"1d13c918-7acd-4170-81cc-13a8693f9855":{"defs":[{"extends":null,"module":null,"name":"DataModel","overrides":[],"properties":[]}],"roots":{"references":[{"attributes":{},"id":"1096","type":"Selection"},{"attributes":{"axis":{"id":"1020"},"ticker":null},"id":"1023","type":"Grid"},{"attributes":{"editor":{"id":"1099"},"field":"sy","formatter":{"id":"1082"},"title":"Y (km)"},"id":"1083","type":"TableColumn"},{"attributes":{"axis_label":"Y (km)","axis_label_text_font_style":"bold","formatter":{"id":"1093"},"major_label_policy":{"id":"1095"},"ticker":{"id":"1025"}},"id":"1024","type":"LinearAxis"},{"attributes":{},"id":"1033","type":"HelpTool"},{"attributes":{},"id":"1097","type":"UnionRenderers"},{"attributes":{"source":{"id":"1002"}},"id":"1087","type":"CDSView"},{"attributes":{},"id":"1098","type":"StringEditor"},{"attributes":{"columns":[{"id":"1080"},{"id":"1083"}],"editable":true,"height":280,"source":{"id":"1002"},"view":{"id":"1087"},"width":200},"id":"1085","type":"DataTable"},{"attributes":{"data":{"tx":[0.0],"ty":[6.0]},"selected":{"id":"1108"},"selection_policy":{"id":"1109"}},"id":"1004","type":"ColumnDataSource"},{"attributes":{"axis":{"id":"1024"},"dimension":1,"ticker":null},"id":"1027","type":"Grid"},{"attributes":{},"id":"1025","type":"BasicTicker"},{"attributes":{},"id":"1099","type":"StringEditor"},{"attributes":{},"id":"1106","type":"Selection"},{"attributes":{},"id":"1029","type":"WheelZoomTool"},{"attributes":{"format":"0[.]000","text_align":"center"},"id":"1079","type":"NumberFormatter"},{"attributes":{},"id":"1028","type":"PanTool"},{"attributes":{"overlay":{"id":"1034"}},"id":"1030","type":"BoxZoomTool"},{"attributes":{},"id":"1107","type":"UnionRenderers"},{"attributes":{},"id":"1031","type":"SaveTool"},{"attributes":{},"id":"1032","type":"ResetTool"},{"attributes":{"fill_color":{"value":"blue"},"line_color":{"value":"blue"},"marker":{"value":"diamond"},"size":{"value":10},"x":{"field":"pox"},"y":{"field":"poy"}},"id":"1053","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"blue"},"line_alpha":{"value":0.1},"line_color":{"value":"blue"},"size":{"value":3},"x":{"field":"tx"},"y":{"field":"ty"}},"id":"1059","type":"Scatter"},{"attributes":{"data":{"tx":{"__ndarray__":"Bfm52bJcm7/QU1fJgBudPyjUTioNM4k/Fa4/4gVOWL/nHwGamGi2P2p6bT7pM7w/edxeiSHVt7+1+ELu3Hpjv2nsGfy3RKY/aM4ETUbttj9mVqJbBGxgv0CzCGLf7pw/rJmyO7cWjD/KB48UcU6cv4TacRAbCKM/TZ/5V8j8kL+UoWjg9uaWvxPQuJZfX6u/GsGbd+p+v789D8QXvFepPwUjTY/FA2W/CK0MLNs+q79Tp081SDeiP0x8Es4mwrG/ScJ2LECmrr+AqKjjNyiTP2xBTm3Uz6G/qH8ZGOR/kb8MQjVS4cq8v6HWJrK7tai/re5GEkCYlL/k7dFSRBaSvzZCKFvcG5a/11W4Yc3ssD/wReJkNjOePyeOTBTP34I/oJRHFsTosT87YisAOuyeP5KRZrIWZn0/YyhQk6frnz+5zObwI51nv2zzwp8ZslI/UcsijgmHpD88bKVtzZOYv8UvCJVTeZa/JlYt2GiCk7+w5j0UtcmZP9D6PayLU5q/tfFgHgc8mb+c3d57aC+wvwa272ZO/Kc/u7ziZb1eYT99O5FBVpKoP/kfbJUQoZc/6WdOR3sKqD8I/NH3gQ+vP/rx9KVX6VG/28e9JQKOhT/2gZoYgbusv7NbAW/zo5I/iA+sLehtib+8H0SpS3+zPw4oznNfKZA/gF2NGzAEtL+G5G3j02GSv0TNnTLpSIK/efROTvsjij+BqHjMlY+qP797OXS206c/Ncq/uTZNmz8lXiejAXSiv+7I2u4OViy/GxTllSAdsD/K0izPlv2pP70LxvFVsoM/4k7/4BpAhj/UrhJPGsuDP5H5KIZaEbE/+jOXapCUmb8IUoEa7tuwv/y00JdCraW/NnkO0lRQUj9I5UaZkp10P9UTwDIzaJi/KFer3SV2oz+rAdtA7PyUv+f9wM6MGKa/TIzpnMuBoD96+u42mLcmv4l9ttUA2mq/XfzwFuaHpb/MBZ594GuWPzjiBVcVyJ8/xMO9xbisgz9zleCAzmuevyNgCkGKcJ0/UrYjIalnsT/B2PMStJl4P65fZzNCmqa/Cf7xxr8qsT8=","dtype":"float64","order":"little","shape":[100]},"ty":{"__ndarray__":"An5vrTcUGEAcvHkvsasXQBZ5CpqXtRdA7AecQokxGECicZlxDuEXQNkqIojJbRdABayrxlLDGECCeCXYyhAYQFpXeeDA1BdAHj6edndsF0DmkzlA32cYQLgY8heGyBdAdyzsuK8jGEAvr/vNOT0YQGRlHCfj1xdA7SjIKsfhF0DREkL5GiYYQOOVH3kkMBhAnRg+oBlTGECR2D4r1lIXQN6daAx7GBhAyJyaVNcxGEBqze/E9vUXQDbox0A6fRhAWgeL0DhsGEBkcFeAYZQXQCZe4d00HRhAhi+YGqILGECg3J2BuZ0YQHuaVVF+IxhAZlAf8t6uF0DdePjtFfAXQA0z5fwLHhhA5ABthrHoF0AaATVZDaUXQOKHtAtRKRhAZMU4BQf7F0DIQdETgeQXQH27lmtfZRdAghSxJRuiGEAPIWG4e0sYQMy+VRJzkxhAbKgiKAHfF0B6yZK6DTAYQHt/TuODjRhAuQjI4X7gF0Ba0U2GN54XQLMfezcIixhAe9BII2L3F0BZWjS7b14YQM8Cp90yXhdA6TCYAx32F0AO+BGerTkYQHBLSB76JRhAreoWnSmCF0BWPo8kvFAXQPXZ5Wwu9BdAc/SwIp/3F0B3CVgzMTgYQCAMLRY3EhhAycdCtLJCGECGiz587cAXQDZX9kLrOBhAyF74lQSnGEBftxKR7FwYQA8jzqV3NBhAu/704ajyF0BZy3U2nWUXQDeyLPQWARhA3U9L8LKnF0CMqHik980XQCJTuPo1TRhAecK7tYppF0BEFEaisMkXQO+LGZXbRhhAk+EiNJqRF0A3agIDdx8YQD9O7EHLyBdAR7HEGxJmGEA7OF9+EkMYQFiAGlVqRhhA04IxJoYHGECT2s3WtSIYQCFRw7qXKxhAzuPyR1noF0Cp3WsN6EQYQGhz0DeOehhAZsE+DFufF0AWWUhyjtUXQJbwfKhHAhhAzLFmdnZNGEDgX+EXO4wXQDFhZkor7xdAqsKtyHP3F0B1TcTgi2MYQNcx/ZBsxhdAKmwoJfPOF0CTl+MKJCoYQABCUNcPQBhAD5yikB+VF0A=","dtype":"float64","order":"little","shape":[100]}},"selected":{"id":"1102"},"selection_policy":{"id":"1103"}},"id":"1005","type":"ColumnDataSource"},{"attributes":{"source":{"id":"1004"}},"id":"1076","type":"CDSView"},{"attributes":{"data_source":{"id":"1003"},"glyph":{"id":"1053"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1054"},"view":{"id":"1056"}},"id":"1055","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1007"},"glyph":{"id":"1068"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1069"},"view":{"id":"1071"}},"id":"1070","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1003"}},"id":"1056","type":"CDSView"},{"attributes":{"data":{"tx":[0.0031139497665468256],"ty":[6.003904938363477]},"selected":{"id":"1104"},"selection_policy":{"id":"1105"}},"id":"1006","type":"ColumnDataSource"},{"attributes":{"fill_color":{"value":"blue"},"line_color":{"value":"blue"},"size":{"value":3},"x":{"field":"tx"},"y":{"field":"ty"}},"id":"1058","type":"Scatter"},{"attributes":{},"id":"1108","type":"Selection"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"red"},"line_alpha":{"value":0.1},"line_color":{"value":"red"},"size":{"value":5},"x":{"field":"tx"},"y":{"field":"ty"}},"id":"1074","type":"Scatter"},{"attributes":{"data_source":{"id":"1002"},"glyph":{"id":"1048"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1049"},"view":{"id":"1051"}},"id":"1050","type":"GlyphRenderer"},{"attributes":{"line_alpha":0.1,"line_color":"lime","line_width":2,"x":{"field":"ex"},"y":{"field":"ey"}},"id":"1069","type":"Line"},{"attributes":{},"id":"1109","type":"UnionRenderers"},{"attributes":{"bottom_units":"screen","fill_alpha":0.5,"fill_color":"lightgrey","left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1034","type":"BoxAnnotation"},{"attributes":{"data_source":{"id":"1004"},"glyph":{"id":"1073"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1074"},"view":{"id":"1076"}},"id":"1075","type":"GlyphRenderer"},{"attributes":{"data":{"pox":[0.333],"poy":[3.0]},"selected":{"id":"1100"},"selection_policy":{"id":"1101"}},"id":"1003","type":"ColumnDataSource"},{"attributes":{"children":[{"id":"1009"},{"id":"1085"}]},"id":"1088","type":"Column"},{"attributes":{},"id":"1100","type":"Selection"},{"attributes":{},"id":"1021","type":"BasicTicker"},{"attributes":{},"id":"1101","type":"UnionRenderers"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"lime"},"line_alpha":{"value":0.1},"line_color":{"value":"lime"},"size":{"value":5},"x":{"field":"tx"},"y":{"field":"ty"}},"id":"1064","type":"Scatter"},{"attributes":{"active_multi":null,"tools":[{"id":"1028"},{"id":"1029"},{"id":"1030"},{"id":"1031"},{"id":"1032"},{"id":"1033"},{"id":"1077"}]},"id":"1035","type":"Toolbar"},{"attributes":{"source":{"id":"1002"}},"id":"1051","type":"CDSView"},{"attributes":{"source":{"id":"1006"}},"id":"1066","type":"CDSView"},{"attributes":{},"id":"1102","type":"Selection"},{"attributes":{"data_source":{"id":"1002"},"glyph":{"id":"1043"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1044"},"view":{"id":"1046"}},"id":"1045","type":"GlyphRenderer"},{"attributes":{},"id":"1090","type":"BasicTickFormatter"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"black"},"line_alpha":{"value":0.1},"radius":{"value":0.1},"x":{"field":"sx"},"y":{"field":"sy"}},"id":"1044","type":"Circle"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"blue"},"line_alpha":{"value":0.1},"line_color":{"value":"blue"},"marker":{"value":"diamond"},"size":{"value":10},"x":{"field":"pox"},"y":{"field":"poy"}},"id":"1054","type":"Scatter"},{"attributes":{"source":{"id":"1002"}},"id":"1046","type":"CDSView"},{"attributes":{},"id":"1103","type":"UnionRenderers"},{"attributes":{"fill_color":{"value":"black"},"marker":{"value":"inverted_triangle"},"x":{"field":"sx"},"y":{"field":"sy"}},"id":"1048","type":"Scatter"},{"attributes":{"source":{"id":"1005"}},"id":"1061","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"black"},"line_alpha":{"value":0.1},"marker":{"value":"inverted_triangle"},"x":{"field":"sx"},"y":{"field":"sy"}},"id":"1049","type":"Scatter"},{"attributes":{"data_source":{"id":"1005"},"glyph":{"id":"1058"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1059"},"view":{"id":"1061"}},"id":"1060","type":"GlyphRenderer"},{"attributes":{},"id":"1093","type":"BasicTickFormatter"},{"attributes":{},"id":"1092","type":"AllLabels"},{"attributes":{},"id":"1095","type":"AllLabels"},{"attributes":{},"id":"1014","type":"DataRange1d"},{"attributes":{"fill_color":{"value":"lime"},"line_color":{"value":"lime"},"size":{"value":5},"x":{"field":"tx"},"y":{"field":"ty"}},"id":"1063","type":"Scatter"},{"attributes":{"data":{"ex":{"__ndarray__":"S873QOUTsL+1zc5sZWCtv3pAfWwTeaq/WV0IvNJ0p79h/HZpv1akv3k5MiEQIqG/Br37uyW0m7+wHNUBUwSVvzl8ElMZd4y/0Lu9BESDfb/4MVp4Nsw+v/DcVwPfuHk/awQ+upGoij8em/765S+UP5iP8mD9+Zo/UDm5ssfVoD9M/OjS2h6kP/qCihHVVKc/wT6wHmd0qj/yomrDWHqtP/w0sxnGMbA/euenoYCWsT/Wf1VA7OmyPyjD+BOrKrQ/+pfzenJXtT+lb59oDG+2PzNS6KRYcLc/6hdn9U1auD8Gjsgu+yu5P0qyZy2I5Lk/lMEatDaDuj9sbk0wYwe7PxAanmKFcLs/S0BQ6zC+uz+HTwO6FfC7P83EOmAABrw/U3hiRtr/uz8VdBjDqd27P8ZSpBSSn7s/VuOiPNNFuz8RhAu+ydC6P5A40z3uQLo/2cePBtWWuT/UFJtvLdO4P+VDVCjB9rc/nP44aHMCtz+yJK0EQPe1P6BaYm061rQ/rw5rkIygsz+doR2ndVeyP+pGBO1I/LA/I6NZhNggrz9SyIF0rSqsP8uWxTMeGak/ESG7h1TvpT+G/I4vk7CiP5BJFQ9lwJ4/nnCmLDoDmD9uCN0OmDCRP96OvloOn4Q/CGLAA/c4az8y7ahxDwxsv2kSijV4xoS/Vv1pnvc2kb/2lGvfqvWXvzS1R/JhmJ6/fh494iKMor/WC8SUUbelv5qDhOF4yqi/w81IXm3Cq79HJkaqH5yuv0dT0cpPqrC/UBFqlI/0sb8fWlzEeiuzv0cGN9rQTbS/WQkKjWZatb/e1+j/JlC2v+/eT98ULre/Z9xGZkvzt7+06DJK/564v8EbZYx/MLm/lsiNMDanub//PFjXqAK6v6Sljzx5Qrq/Lw5LmGVmur/hUrziSG66v50dXPoaWrq/QJVLrPApur9WG+Oe+925v8kyhB6Kdrm/XVHjzAb0uL/9zhwz+Fa4v0tBBjcAoLe/NThLdNvPtr/XYwF6YOe1vzuNfO1+57S/d19Gkz7Rs79qpjg/vqWyv/5J0qwyZrG/TM73QOUTsL8=","dtype":"float64","order":"little","shape":[100]},"ey":{"__ndarray__":"XHnHxtznF0AcUsxu6doXQIy4OnEgzhdAhkHx+47BF0ByDpADQrUXQNPzHTZGqRdAMWb27aedF0CRpg0lc5IXQMdOmGizhxdAffcizXN9F0BJPibjvnMXQNXxIqyeahdA9J1RkBxiF0BgGfBUQVoXQDIUNxMVUxdAv/gAMJ9MF0DvuSpU5kYXQFVqtmXwQRdAoq+2gcI9F0D2Vgn3YDoXQBh55kHPNxdAb8JICBA2F0DdkjIXJTUXQNfF0mAPNRdAowyL+841F0AM3NghYzcXQFkFITPKORdAqihdtQE9F0D9RalXBkEXQD7LrvXTRRdAQ5npm2VLF0AQmcKMtVEXQICeeka9WBdAvH7fiXVgF0COcMRh1mgXQCcDNivXcRdAuDZhnm57F0CHiSTYkoUXQOYcQWQ5kBdAmXAhSFebF0DDmCoO4aYXQAFEjNHKshdAVGSDSgi/F0CM1wLbjMsXQKECtZtL2BdAu/dIaTflF0DXcP3xQvIXQDCpW8Ng/xdAOu4TWIMMGEBAnu0lnRkYQLg2vKugJhhABA9Lf4AzGEAyZjFbL0AYQG2CgCygTBhAL8g9IMZYGECq5JqwlGQYQAVr3rH/bxhA6ZXvXvt6GECjPnhlfIUYQCmIkPF3jxhAPzbouOOYGEBTL2IFtqEYQOQ5F7/lqRhAqqO1dWqxGED1KDRpPLgYQKgkz5FUvhhAm8xHp6zDGEAJAl4nP8gYQAEJflsHzBhAdUycXQHPGEC6LDocKtEYQPmzj11/0hhA6e3Wwf/SGEBfhbbEqtIYQOsxyr2A0RhA4mhI4ILPGEDersU5s8wYQDzQFrAUyRhABC9U/qrEGEB8OgGxer8YQFEHXCGJuRhAut3Zb9yyGECDbNZ9e6sYQKYjfOZtoxhADQbt9ruaGECLB7SlbpEYQC7Jh4mPhxhAFTpozyh9GEAsTSEwRXIYQNeTPeXvZhhAJyJ0nTRbGEAEqp1wH08YQDA3PdO8QhhAymWpiRk2GEBjT+OaQikYQJG/KENFHBhAxodP5i4PGECtAvgBDQIYQIwBpR/t9BdAXHnHxtznF0A=","dtype":"float64","order":"little","shape":[100]}},"selected":{"id":"1106"},"selection_policy":{"id":"1107"}},"id":"1007","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"1006"},"glyph":{"id":"1063"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1064"},"view":{"id":"1066"}},"id":"1065","type":"GlyphRenderer"},{"attributes":{},"id":"1012","type":"DataRange1d"},{"attributes":{"data":{"S":{"__ndarray__":"AAAAAAAAEEAAAAAAAAAUQAAAAAAAAAAAAAAAAAAA8D8AAAAAAAAAQAAAAAAAAAAAAAAAAAAACMAAAAAAAAAAQAAAAAAAAAAA","dtype":"float64","order":"little","shape":[3,3]},"st":{"__ndarray__":"LOY60uaITT4s5jrS5ohNPim891J46FE+","dtype":"float64","order":"little","shape":[3]},"sx":{"__ndarray__":"AAAAAAAAEEAAAAAAAADwPwAAAAAAAAjA","dtype":"float64","order":"little","shape":[3]},"sy":{"__ndarray__":"AAAAAAAAFEAAAAAAAAAAQAAAAAAAAABA","dtype":"float64","order":"little","shape":[3]}},"js_property_callbacks":{"patching":[{"id":"1008"}]},"selected":{"id":"1096"},"selection_policy":{"id":"1097"}},"id":"1002","type":"ColumnDataSource"},{"attributes":{"args":{"N":3,"ctx":{"id":"1006"},"etx":{"id":"1005"},"ig":{"id":"1003"},"range_err":0.01,"st":{"id":"1002"},"time_err":1e-10,"tx":{"id":"1004"},"v":299792458},"code":"\n    console.log('test')\n    \n    var num_trials = 100;\n    var st = st.data;\n    \n    var v = v;\n    var S = [];\n    var Po = [ig.data['pox'][0], ig.data['poy'][0] ];\n    var P = [tx.data['tx'][0], tx.data['ty'][0] ];\n    \n    //--------------------------------------------------------------------\n    function mat_mul(A, B)\n    {\n        var AB = [[0,0],[0,0]];\n        AB[0][0] = A[0][0]*B[0][0] + A[0][1]*B[1][0];\n        AB[0][1] = A[0][0]*B[0][1] + A[0][1]*B[1][1];\n        AB[1][0] = A[1][0]*B[0][0] + A[1][1]*B[1][1];\n        AB[1][1] = A[1][0]*B[0][1] + A[1][1]*B[1][1];\n        return AB;\n    }\n    \n    //--------------------------------------------------------------------\n    function inv_mat(A)\n    {\n        var AI = [[0,0],[0,0]];\n        var det = A[0][0]*A[1][1] - A[0][1]*A[1][0];\n        if(det == 0 )\n            return AI;\n            \n        AI[0][0] = A[1][1]/det;\n        AI[0][1] = -A[1][0]/det;\n        AI[1][0] = -A[0][1]/det;\n        AI[1][1] = A[0][0]/det;\n        return AI;\n    }\n     \n    //--------------------------------------------------------------------\n    function randn()\n    {\n        return Math.sqrt(-2 * Math.log(1 - Math.random())) * Math.cos(2 * Math.PI * Math.random());\n    }\n    \n    //--------------------------------------------------------------------\n    function arr_avg(A)\n    {\n        var length = A.length;\n        var value = 0.0;\n        for(idx=0; idx&lt;length; ++idx)\n        {\n            value += A[idx];\n        }\n        return value/length;\n    }\n    \n    \n    //--------------------------------------------------------------------\n    function calc_tdoa_position(S, Po, v)\n    {\n        // error limit\n        var d_err = 1e-3;\n        var err = 1000;\n    \n        // iteration limit\n        var max_iter = 50;\n        var iter = 0;\n    \n        var Pn = Po.slice(0);\n        \n        S.sort(function(a,b){ return a[2] &gt; b[2] ? 1 : -1; })\n        \n        //--------------------------------------------------------------------\n        while((iter &lt; max_iter) &amp;&amp; (err &gt; d_err))\n        {\n            // calculate the R's\n            var R = [];\n            for(var idx=0; idx&lt;N; ++idx)\n            {\n                R[idx] = Math.sqrt( (S[idx][0] - Pn[0])*(S[idx][0] - Pn[0]) + (S[idx][1] - Pn[1])*(S[idx][1] - Pn[1]) );\n            }\n            \n            // build A and b\n            var A = [[0,0],[0,0]];\n            var b = [0,0];\n            for(var idx=1; idx&lt;N; ++idx)\n            {\n                A[idx - 1][0] = (S[idx][0] - Pn[0])/R[idx] - (S[0][0] - Pn[0])/R[0];\n                A[idx - 1][1] = (S[idx][1] - Pn[1])/R[idx] - (S[0][1] - Pn[1])/R[0];\n                b[idx - 1] = v * (S[idx][2] - S[0][2]) - (R[idx] - R[0]);\n            }\n                \n            // invert A -&gt; (AtA)^-1 At\n            var AT = [[0,0],[0,0]];\n            AT[0][0] = A[0][0];\n            AT[0][1] = A[1][0];\n            AT[1][0] = A[0][1];\n            AT[1][1] = A[1][1];\n    \n            // multiply ATA\n            var ATA = mat_mul(AT, A);\n            \n            ATA = inv_mat(ATA);\n            \n            ATA = mat_mul(ATA, AT);\n            \n            // ATA*b\n            var dP = [];\n            dP[0] = ATA[0][0]*b[0] + ATA[0][1]*b[1];\n            dP[1] = ATA[1][0]*b[0] + ATA[1][1]*b[1];\n            \n            // generate new Po: Po = Po - dP\n            Pn[0] = Pn[0] - dP[0];\n            Pn[1] = Pn[1] - dP[1];\n    \n            // get the error\n            err = Math.sqrt(dP[0]*dP[0] + dP[1]*dP[1]); \n                   \n            ++iter;\n        }\n        \n        return Pn;\n    \n    }\n       \n    //--------------------------------------------------------------------\n    // build S and update the latest arrival time estimate based on the new station positions\n    for(var idx = 0; idx&lt;N; idx++)\n    {\n        S[idx] = [];\n        S[idx][0] = st['sx'][idx];\n        S[idx][1] = st['sy'][idx];\n        S[idx][2] = Math.sqrt( (S[idx][0] - P[0])*(S[idx][0] - P[0]) + (S[idx][1] - P[1])*(S[idx][1] - P[1]) )/v;\n    }\n    \n    \n    var P_new = [];\n    var Sn = [];\n    \n    for(var idx=0; idx&lt;num_trials; ++idx)\n    {\n    \n        for(var jdx=0; jdx&lt;N; ++jdx)\n        {\n            Sn[jdx] = [S[jdx][0] + range_err*randn(), S[jdx][1] + range_err*randn(), S[jdx][2] + time_err*randn()];\n            //Sn[jdx][1] = S[jdx][1] + range_err*randn();\n            //Sn[jdx][2] = S[jdx][2] + time_err*randn();\n        }    \n    \n        // calculate the position\n        P_new[idx] = calc_tdoa_position(Sn, Po, v);\n        \n    }\n    \n    var cx = arr_avg(P_new.map(function(value,index) { return value[0]; }) );\n    var cy = arr_avg(P_new.map(function(value,index) { return value[1]; }) );\n    \n    // return the results   \n    console.log(Po);\n    ctx.data['tx'] = [cx];\n    ctx.data['ty'] = [cy];\n    \n    etx.data['tx'] = P_new.map(function(value,index) { return value[0]; });\n    etx.data['ty'] = P_new.map(function(value,index) { return value[1]; });\n    \n    ctx.change.emit();\n    etx.change.emit();\n    \n    var bp = 1;\n"},"id":"1008","type":"CustomJS"},{"attributes":{},"id":"1016","type":"LinearScale"},{"attributes":{"line_color":"lime","line_width":2,"x":{"field":"ex"},"y":{"field":"ey"}},"id":"1068","type":"Line"},{"attributes":{"below":[{"id":"1020"}],"center":[{"id":"1023"},{"id":"1027"}],"left":[{"id":"1024"}],"renderers":[{"id":"1045"},{"id":"1050"},{"id":"1055"},{"id":"1060"},{"id":"1065"},{"id":"1070"},{"id":"1075"}],"title":{"id":"1010"},"toolbar":{"id":"1035"},"width":1300,"x_range":{"id":"1012"},"x_scale":{"id":"1016"},"y_range":{"id":"1014"},"y_scale":{"id":"1018"}},"id":"1009","subtype":"Figure","type":"Plot"},{"attributes":{"num_objects":3,"renderers":[{"id":"1045"},{"id":"1050"}]},"id":"1077","type":"PointDrawTool"},{"attributes":{},"id":"1104","type":"Selection"},{"attributes":{"source":{"id":"1007"}},"id":"1071","type":"CDSView"},{"attributes":{"fill_color":{"value":"red"},"line_color":{"value":"red"},"size":{"value":5},"x":{"field":"tx"},"y":{"field":"ty"}},"id":"1073","type":"Scatter"},{"attributes":{"text":"TDOA"},"id":"1010","type":"Title"},{"attributes":{"editor":{"id":"1098"},"field":"sx","formatter":{"id":"1079"},"title":"X (km)"},"id":"1080","type":"TableColumn"},{"attributes":{"fill_alpha":{"value":0.4},"fill_color":{"value":"black"},"radius":{"value":0.1},"x":{"field":"sx"},"y":{"field":"sy"}},"id":"1043","type":"Circle"},{"attributes":{"format":"0[.]000","text_align":"center"},"id":"1082","type":"NumberFormatter"},{"attributes":{},"id":"1105","type":"UnionRenderers"},{"attributes":{"axis_label":"X (km)","axis_label_text_font_style":"bold","formatter":{"id":"1090"},"major_label_policy":{"id":"1092"},"ticker":{"id":"1021"}},"id":"1020","type":"LinearAxis"},{"attributes":{},"id":"1018","type":"LinearScale"}],"root_ids":["1088"]},"title":"Bokeh Application","version":"2.3.0"}}
        </script>
        <script type="text/javascript">
          (function() {
            var fn = function() {
              Bokeh.safely(function() {
                (function(root) {
                  function embed_document(root) {
                    
                  var docs_json = document.getElementById('1265').textContent;
                  var render_items = [{"docid":"1d13c918-7acd-4170-81cc-13a8693f9855","root_ids":["1088"],"roots":{"1088":"10ff74c6-53c4-46d0-91b4-eeed854d3882"}}];
                  root.Bokeh.embed.embed_items(docs_json, render_items);
                
                  }
                  if (root.Bokeh !== undefined) {
                    embed_document(root);
                  } else {
                    var attempts = 0;
                    var timer = setInterval(function(root) {
                      if (root.Bokeh !== undefined) {
                        clearInterval(timer);
                        embed_document(root);
                      } else {
                        attempts++;
                        if (attempts > 100) {
                          clearInterval(timer);
                          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                        }
                      }
                    }, 10, root)
                  }
                })(window);
              });
            };
            if (document.readyState != "loading") fn();
            else document.addEventListener("DOMContentLoaded", fn);
          })();
        </script>
    
  </body>
  
</html>